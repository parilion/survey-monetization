# 管理员使用手册

本文档介绍如何在管理后台创建和管理问卷。

## 快速开始

### 登录管理后台

1. 访问管理后台：`http://localhost:5174`
2. 使用默认账号登录：`admin` / `admin123`
3. 首次登录后请修改密码

### 创建问卷流程

```
创建问卷 → 添加题目 → 配置计分 → 生成密码 → 测试发布
```

---

## 问卷管理

### 创建新问卷

1. 进入 **问卷管理** 页面
2. 点击 **新建问卷** 按钮
3. 填写问卷基本信息：

| 字段 | 必填 | 说明 |
|-----|------|------|
| 问卷标题 | 是 | 问卷名称 |
| slug | 是 | URL短码，如 `mytest` |
| 状态 | 否 | 草稿/已发布 |
| 介绍页标题 | 否 | H5端显示的标题 |
| 介绍页副标题 | 否 | H5端显示的副标题 |
| 介绍页按钮文字 | 否 | H5端按钮文字 |

### 编辑问卷

1. 在问卷列表中找到目标问卷
2. 点击 **编辑** 按钮
3. 修改问卷信息后保存

### 启用/禁用问卷

- **草稿**：问卷不可访问
- **已发布**：问卷可访问

> 只有已发布的问卷才能在H5端访问。

---

## 题目管理

### 添加题目

1. 进入 **题目管理** 页面
2. 选择要添加题目的问卷
3. 点击 **新建题目** 按钮
4. 填写题目信息

### 题目配置说明

| 字段 | 说明 |
|-----|------|
| 题目内容 | 题目文本 |
| 排序序号 | 显示顺序，数字越小越靠前 |
| 题目类型 | 单选/多选 |

### 选项配置

每个选项包含：

| 字段 | 说明 | 示例 |
|-----|------|------|
| 选项内容 | 选项文字 | "我喜欢独处" |
| 分值 | 计分分值，默认1 | 1、2、3 |
| 计分类型 | 结果类型标识 | "A"、"ESTJ" |

详细配置请参考 [题目配置指南](../REFERENCE/QUESTION_CONFIG.md)

---

## 计分配置

### 访问计分配置

1. 进入 **问卷管理** 页面
2. 找到目标问卷
3. 点击 **计分配置** 按钮

### 计分模式

> **说明**：当前版本支持两种计分模式。

| 模式 | 说明 | 适用场景 |
|-----|------|---------|
| **投票制** (vote) | 统计各类型选择次数，最高票者获胜 | 性格测试、偏好测试 |
| **累加制** (score) | 选项分值累加，按总分区间匹配结果 | NPS、满意度调查 |

### 平局处理

仅投票制需要设置平局处理方式：

| 方式 | 说明 |
|-----|------|
| 取第一个 | 返回得分最高的第一个类型（推荐） |
| 随机选择 | 随机选择一个 |
| 返回全部 | 返回所有最高分类型（逗号分隔） |

### 分数区间配置

仅累加制需要配置分数区间：

| 字段 | 说明 | 示例 |
|-----|------|------|
| min | 最小值（含），不传表示无限小 | 9 |
| max | 最大值（含），不传表示无限大 | 6 |
| result | 结果类型标识 | promoter |
| label | 结果标签 | 推荐者 |

**配置示例**：
```
总分 ≥ 9分 → 推荐者
总分 7-8分 → 中立者
总分 ≤ 6分 → 贬损者

JSON配置：
[
  {"min": 9, "result": "promoter", "label": "推荐者"},
  {"min": 7, "max": 8, "result": "passive", "label": "中立者"},
  {"max": 6, "result": "detractor", "label": "贬损者"}
]
```

详细说明请参考 [计分系统文档](../REFERENCE/SCORING_SYSTEM.md)

---

## 密码管理

### 生成密码

1. 进入 **密码管理** 页面
2. 选择要生成密码的问卷
3. 点击 **生成密码** 按钮
4. 设置生成数量
5. 点击确认生成

### 密码规则

- 长度：8位
- 格式：字母+数字
- 有效期：12小时
- 可重复使用

### 密码列表

| 字段 | 说明 |
|-----|------|
| 密码 | 访问密码 |
| 状态 | 可使用/已过期 |
| 过期时间 | 失效时间 |
| 创建时间 | 生成时间 |

---

## 结果模板管理

### 添加结果模板

1. 进入 **结果模板** 页面
2. 选择要添加结果的问卷
3. 点击 **新建结果模板**
4. 填写结果信息

### 模板字段

| 字段 | 说明 | 示例 |
|-----|------|------|
| 结果类型 | 唯一标识 | "ESTJ"、"promoter" |
| 结果标题 | 显示名称 | "管理者型" |
| 简短描述 | 一句话描述 | "务实果断的领导者" |
| 详细内容 | 详细结果说明 | 完整的结果描述 |
| 标签 | 关键词标签 | ["领导力", "责任心"] |
| 推荐建议 | 针对结果的建议 | "您适合管理类工作" |

---

## H5链接分发

### 获取问卷链接

1. 进入 **问卷管理** 页面
2. 找到目标问卷
3. 点击 **复制链接** 按钮
4. 将链接发送给用户

### 链接格式

```
https://your-domain.com/{slug}
```

示例：`https://test.com/mytest`

---

## 常见问题

### Q1: 问卷无法访问？

检查问卷状态是否为"已发布"，只有已发布的问卷才能在H5端访问。

### Q2: 密码验证失败？

确认密码未过期（有效期12小时），如已过期需要重新生成。

### Q3: 如何删除问卷？

问卷删除后无法恢复，请谨慎操作。建议先将状态改为"草稿"。

### Q4: 答案提交后没有结果？

确保已配置结果模板，且结果类型的标识与选项的计分类型匹配。

---

## 快捷键

| 快捷键 | 功能 |
|-------|------|
| Ctrl + N | 新建问卷 |
| Ctrl + S | 保存当前表单 |
| Esc | 关闭弹窗 |
